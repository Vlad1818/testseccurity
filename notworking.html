<html>
<head>
<script type="text/javascript">
	i=[0,0,0,0,0];
	sites = ['http://google.com', 'http://facebook.com', 'http://youtube.com', 'http://yahoo.com', 
	'http://wikipedia.org', 'http://linkedin.com', 'http://live.com', 'http://twitter.com', 'http://amazon.com'];
	firstLoad=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]];
	cachedTimes=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]];
	viewRatios=[1.2,1.2,1.2,1.2,1.2,1.2,1.2,1.2,1.2,1.2];
	var temp = (new Date()).getTime();
	beforeload = [temp,temp,temp,temp,temp]
	loadCount = [0,0,0,0,0];
	const TIMES_TO_LOAD=2;
	finishedFrames = [0,0,0,0,0,0,0,0,0,0]
	finishedSites = 0;
	
	function pageloadingtime(pagenum)
	{
	alert(pagenum);
		var num = parseInt(pagenum) - 1;
		var afterload = (new Date()).getTime();
		var seconds = (afterload-beforeload[num])/1000;
		if(loadCount[num] == 0){
			firstLoad[i[num]][num]=seconds;}
		else{
			cachedTimes[i[num]][num]+=seconds;}
		document.getElementById("loadingtime"+pagenum).innerHTML = document.getElementById("loadingtime"+pagenum).innerHTML+"<font color='red'>"+sites[i[num]]+" Load "+(loadCount[num]+1)+" took " + seconds + " seconds</font></br>";
		loadCount[num]++;
		if(loadCount[num]==TIMES_TO_LOAD){
			loadCount[num]=0;
			i[num]++;
		}
		if(i[num]==sites.length){
			finishedSites++;
			if(finishedSites==sites.length)
				printFinalData();
		}
		var f = document.getElementById('iframe'+pagenum);
		if(i[num]<sites.length){
			beforeload[num] = (new Date()).getTime();
			f.src = sites[i[num]];
		}
	}
	
	function printFinalData()
	{
		for (var j=0;j<sites.length;j++)
		{ 
			var first = getAvgFirstLoad(j);
			var cached = getAvgCacheLoad(j);
			document.getElementById("loadingtimefinal").innerHTML = document.getElementById("loadingtimefinal").innerHTML+"<font color='blue'>"+sites[j]+" first load took "+first+" and cached load took " + cached + "</font></br>";
		}
		for (var j=0;j<sites.length;j++)
		{ 
			var first = getAvgFirstLoad(j);
			var cached = getAvgCacheLoad(j);
			if(cached*viewRatios[j])>=first)
				document.getElementById("loadingtimefinal").innerHTML = document.getElementById("loadingtimefinal").innerHTML+"<font color='green'>You have visited"+sites[j]+"!</font></br>";
			else
				document.getElementById("loadingtimefinal").innerHTML = document.getElementById("loadingtimefinal").innerHTML+"<font color='purple'>You did not visited"+sites[j]+"!</font></br>";
		}
	}
	function getAvgFirstLoad(num){
		return (firstLoad[num].sort(function(a,b){return a-b})[0]+firstLoad[num].sort(function(a,b){return a-b})[1]+firstLoad[num].sort(function(a,b){return a-b})[2])/3;
	}
	function getAvgCacheLoad(num){
		return (cachedTimes[num].sort(function(a,b){return a-b})[0]+cachedTimes[num].sort(function(a,b){return a-b})[1]+cachedTimes[num].sort(function(a,b){return a-b})[2])/3;
	}
	
</script>
</head>
<body>
<div id="loadingtime1"></div>
<div id="loadingtime2"></div>
<div id="loadingtime3"></div>
<div id="loadingtime4"></div>
<div id="loadingtime5"></div>
<div id="loadingtimefinal"></div>
<br>
	<iframe id="iframe1" src="http://google.com" width="0" height="0" style="display:none;" onload="pageloadingtime('1');"></iframe>
	<iframe id="iframe2" src="http://google.com" width="0" height="0" style="display:none;" onload="pageloadingtime('2');"></iframe>
	<iframe id="iframe3" src="http://google.com" width="0" height="0" style="display:none;" onload="pageloadingtime('3');"></iframe>
	<iframe id="iframe4" src="http://google.com" width="0" height="0" style="display:none;" onload="pageloadingtime('4');"></iframe>
	<iframe id="iframe5" src="http://google.com" width="0" height="0" style="display:none;" onload="pageloadingtime('5');"></iframe>
</body>
<html>